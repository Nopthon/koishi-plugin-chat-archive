- # koishi-plugin-chat-archive

  [![npm](https://img.shields.io/npm/v/koishi-plugin-chat-archive?style=flat-square)](https://www.npmjs.com/package/koishi-plugin-chat-archive) 

  “留档群u的发言，并在将来发挥作用”

  "Archive group menbers' awesome messages, revisiting someday."

  ---

  一个归档群聊聊天信息的插件，仅此而已

  你问我这个插件有什么用？你可以参考 QQ 的精华消息，和那个功能差不多：

  ```example
  # 模拟聊天记录
  [2024-08-21 01:23:45] 	A: 一进群就感觉有人欠我 50 块钱
  [2024-08-21 01:23:46] 	Z: [引用 A: 一进群就感觉有人欠我 50 块钱] savechat
  [2024-08-21 01:23:46] 	Bot: #1 消息已储存
  
  [2024-08-21 01:23:46] 	Z: [引用 Bot: #1 消息已储存] savechat
  [2024-08-21 01:23:46] 	Bot: #2 消息已储存
  
  [2024-08-21 01:23:47] 	A: listchat -p 1				// 列举聊天记录
  [2024-08-21 01:23:47] 	Bot: 第 1/1 页, 总计2条记录:
  						#2 [2025-08-24 01:23] Bot: 
  						 #1 消息已储存
  						#1 [2025-08-24 01:23] A: 
  						 一进群就感觉有人欠我 50 块钱
  						使用 listchat -p  查看其他页
  						使用 listchat -s  查看单条消息
  
  [2025-08-21 01:23:48] 	A: rollchat						// 随机聊天记录
  [2025-08-21 01:23:48] 	Bot: [2025-08-24 01:23:45] 	A: 
  							一进群就感觉有人欠我 50 块钱
  ```

  一些我可以想到的使用场景：
  
  1. 知识库检索
  
  ```
  [2025-06-08 15:03:00] 	A: findchat 衬衫 便士
  [2025-06-08 15:03:01] 	Bot: 第 1/1 页, 共找到1条记录:
  							#3 [2024-06-08 15:02] Bot: 
  							衬衫的价格是九磅十五便士
  ```
  
  2. 随机群发言回顾（~~你可能不相信这是这个插件的最初开发目的~~）
  
  ```
  [2025-06-16 19:19:00] 	好事的群u: rollchat
  [2025-06-16 19:19:01]	Bot: [2024-08-21 01:23:45] A: 
  							  一进群就感觉有人欠我 50 块钱
  ```

  还有什么功能有待思考，就写到这里吧。

---

  ##### 插件目前的问题 / TODO：

  - **不能合并转发（这个我不会）**
  
  - **不能读取群昵称**
  
  - 在储存图片时，目前直接获取的是qq的临时链接，链接在一定时间后过期，导致信息无法发送，目前考虑：
    1. 直接删除图片内容   2. 建立本地文件夹   3. 用户手动设置一个图床地址
  
  - 很多可以复用的代码被我直接复制粘贴了，应该多拆成几个子函数来着

- 以“预览”的模式展示所有需要输出 -p 形式内容的输出，也就是只展示前面几个文字，后面的用省略号代替
