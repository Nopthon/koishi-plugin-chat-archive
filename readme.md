# koishi-plugin-chat-archive

[![npm](https://img.shields.io/npm/v/koishi-plugin-chat-archive?style=flat-square)](https://www.npmjs.com/package/koishi-plugin-chat-archive) ![Static Badge](https://img.shields.io/badge///UNDER CONSTRUCTION//-8A2BE2)

“留档群u的发言，并在将来发挥作用”

"Archive group menbers' awesome messages, revisiting someday."

---

~~好吧这个插件的初期制作动机就是记录群u的逆天发言的，我摊牌了~~

只是个没有啥实用价值的练手作罢了。

你问我这个插件有什么用？你可以参考 QQ 的精华消息，和那个功能差不多：

```example
[2025-08-21 01:23:45] 	A: 一进群就感觉有人欠我 50 块钱
[2025-08-21 01:23:46] 	Z: [引用 A: 一进群就感觉有人欠我 50 块钱] savechat
[2025-08-21 01:23:46] 	Bot: #1 消息已储存
[2025-08-21 01:23:46] 	Z: [引用 Bot: #1 消息已储存] savechat
[2025-08-21 01:23:46] 	Bot: #2 消息已储存
[2025-08-21 01:23:47] 	A: listchat -p 1
[2025-08-21 01:23:47] 	Bot: 第 1/1 页, 总计2条记录:
						#2 [2025-08-24 01:23] Bot: 
						 #1 消息已储存
						#1 [2025-08-24 01:23] A: 
						 一进群就感觉有人欠我 50 块钱
						使用 listchat -p  查看其他页
						使用 listchat -s  查看单条消息
[2025-08-21 01:23:48] 	A: rollchat
[2025-08-21 01:23:48] 	Bot: [2025-08-24 01:23:45] 	A: 
							一进群就感觉有人欠我 50 块钱
```

你问我这个插件有什么独特的功能吗？比如关键词查询？毕竟 QQ 精华信息最大的缺点是没有查询系统，而这个插件可以进行查询操作：

```
[2025-06-08 15:03:00] 	A: findchat 衬衫 便士
[2025-06-08 15:03:00] 	Bot: 第 1/1 页, 共找到1条记录:
							#3 [2024-06-08 15:02] Bot: 
							衬衫的价格是九磅十五便士
```

还有什么功能有待思考，就写到这里吧。

---

##### 插件目前的问题 / TODO：

- **不能合并转发（这个我不会）**

- 在储存图片时，目前直接获取的是qq的临时链接，链接在一定时间后过期，导致信息无法发送，目前考虑：
  1. 直接删除图片内容   2. 建立本地文件夹   3. 用户手动设置一个图床地址

- 很多可以复用的代码被我直接复制粘贴了，应该多拆成几个子函数来着
